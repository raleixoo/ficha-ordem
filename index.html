<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ficha Ordem Paranormal</title>

<style>
* {
  box-sizing: border-box;
  font-family: Verdana;
}

body {
  background: #f5f5f5;
  margin: 0;
  padding: 16px;
}

.container {
  max-width: 900px;
  margin: auto;
  background: white;
  padding: 16px;
  border-radius: 12px;
}

h2 {
  margin-top: 32px;
  border-bottom: 2px solid #000;
  padding-bottom: 4px;
  font-style: italic;
}

label {
  font-size: 1.1em;
  font-weight: bold;
}

/* FOTO */
.photo-container {
  text-align: center;
}

.photo {
  width: 180px;
  height: 180px;
  border: 2px solid black;
  border-radius: 50%;
  margin: auto;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
}

.photo img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* INPUTS */
input, select, button {
  width: 100%;
  padding: 6px;
  margin: 4px 0;
}

button {
  cursor: pointer;
}

.grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(70px, 1fr));
  gap: 8px;
}

/* STATUS */
.status-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap: 12px;
}

.status-box {
  border: 1px solid #aaa;
  padding: 8px;
  border-radius: 8px;
}

/* HABILIDADES */
.skill {
  border: 1px solid #ccc;
  padding: 8px;
  margin-top: 8px;
  border-radius: 8px;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

/* MODAL */
.modal {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.6);
  justify-content: center;
  align-items: center;
}

.modal-content {
  background: white;
  padding: 16px;
  width: 90%;
  max-width: 400px;
  border-radius: 12px;
}

/* PERÍCIAS */
.pericia {
  border-bottom: 1px solid #ddd;
  padding: 8px 0;
  display: grid;
  grid-template-columns: 1fr 80px 80px;
  gap: 8px;
}

@media (max-width: 600px) {
  .pericia {
    grid-template-columns: 1fr;
  }
}
</style>
</head>

<body>
<div class="container">

<button onclick="resetAll()">Resetar Personagem</button>

<!-- FOTO -->
<div class="photo-container">
  <div class="photo" id="photo">FOTO</div>
  <input type="file" accept="image/*" onchange="loadPhoto(event)">
</div>

<label>Personagem</label>
<input id="personagem" placeholder="Personagem">

<label>Player</label>
<input id="player" placeholder="Player">

<label>Origem</label>
<input id="origem" placeholder="Origem">

<label>Classe</label>
<input id="classe" placeholder="Classe>

<label>Trilha</label>
<input id="trilha" placeholder="Trilha">

<label>NEX %</label>
<input id="nex" placeholder="NEX %">



<h2>Atributos</h2>
<div class="grid">
    <div class="status-box">
        <label>AGI</label>
        <input id="agi" placeholder="AGI">
    </div>
    <div class="status-box">
        <label>VIG</label>
        <input id="vig" placeholder="AGI">
    </div>
    <div class="status-box">
        <label>FOR</label>
        <input id="for" placeholder="AGI">
    </div>
    <div class="status-box">
        <label>INT</label>
        <input id="int" placeholder="AGI">
    </div>
    <div class="status-box">
        <label>PRE</label>
        <input id="pre" placeholder="AGI">
    </div>
</div>

<h2>Status</h2>
<div class="status-grid">
  <div class="status-box">
    <label>PV</label>
    <input id="pvTotal" placeholder="Total">
    <input id="pvAtual" placeholder="Atual">
  </div>
  <div class="status-box">
    <label>SAN</label>
    <input id="sanTotal" placeholder="Total">
    <input id="sanAtual" placeholder="Atual">
  </div>
  <div class="status-box">
    <label>PD</label>
    <input id="pdTotal" placeholder="Total">
    <input id="pdAtual" placeholder="Atual">
  </div>
  <div class="status-box">
    <label>PE</label>
    <input id="peTotal" placeholder="Total">
    <input id="peAtual" placeholder="Atual">
  </div>
</div>

<div class="photo-container" style="padding-top: 1cm;">
    <label style="font-style: italic;">DEF</label>
    <div class="photo" id="photo"><input id="def" style="padding-left: 2cm;" style="padding-right: 2cm;"></div>
</div>

<h2>Habilidades</h2>
<button onclick="openModal()">Adicionar Habilidade +</button>
<div id="skills"></div>

<div class="modal" id="modal">
  <div class="modal-content">
    <input id="skillName" placeholder="Nome da habilidade">
    <input id="skillCost" type="number" placeholder="Custo">
    <select id="skillType">
      <option value="PE">PE</option>
      <option value="PD">PD</option>
    </select>
    <button onclick="addSkill()">Salvar</button>
    <button onclick="closeModal()">Cancelar</button>
  </div>
</div>

<h2>Perícias</h2>
<div id="pericias"></div>

<h2>Inventário</h2>
<button onclick="openInventoryModal()">Adicionar ao Inventário +</button>
<div id="inventory"></div>

<!-- MODAL HABILIDADE -->
<div class="modal" id="skillModal">
  <div class="modal-content">
    <input id="skillName" placeholder="Nome da habilidade">
    <input id="skillCost" type="number" placeholder="Custo">
    <select id="skillType">
      <option value="PE">PE</option>
      <option value="PD">PD</option>
    </select>
    <button onclick="addSkill()">Salvar</button>
    <button onclick="closeSkillModal()">Cancelar</button>
  </div>
</div>

<!-- MODAL INVENTÁRIO -->
<div class="modal" id="inventoryModal">
  <div class="modal-content">
    <input id="itemName" placeholder="Item do inventário">
    <button onclick="addItem()">Salvar</button>
    <button onclick="closeInventoryModal()">Cancelar</button>
  </div>
</div>

</div>

<script>
const periciasLista = [
 "Acrobacia","Adestramento","Artes","Atletismo","Atualidades","Ciências",
 "Crime","Diplomacia","Enganação","Fortitude","Furtividade","Iniciativa",
 "Intimidação","Intuição","Investigação","Luta","Medicina","Ocultismo",
 "Percepção","Pilotagem","Pontaria","Profissão","Reflexos","Religião",
 "Sobrevivência","Tática","Tecnologia","Vontade"
];

const periciasDiv = document.getElementById("pericias");

periciasLista.forEach((p, i) => {
  periciasDiv.innerHTML += `
    <div class="pericia">
      <strong>${p}</strong>
      <input data-save="periciaBonus${i}" placeholder="Bônus">
      <div>
        <label>Treino</label>
        <select data-save="periciaTreino${i}">
          <option>0</option>
          <option>5</option>
          <option>10</option>
          <option>15</option>
        </select>
      </div>
    </div>
  `;
});

/* HABILIDADES */
function openModal() {
  modal.style.display = "flex";
}

function closeModal() {
  modal.style.display = "none";
}

function addSkill() {
  const name = skillName.value;
  const cost = parseInt(skillCost.value);
  const type = skillType.value;

  const div = document.createElement("div");
  div.className = "skill";
  div.innerHTML = `
    <strong>${name}</strong> (${cost} ${type})
    <button onclick="useSkill(${cost}, '${type}')">Usar</button>
    <button onclick="this.parentElement.remove(); saveAll()">Remover</button>
  `;
  skills.appendChild(div);
  closeModal();
  saveAll();
}

function useSkill(cost, type) {
  const field = document.getElementById(type.toLowerCase() + "Atual");
  field.value = Math.max(0, field.value - cost);
  saveAll();
}

/* INVENTÁRIO */
function openInventoryModal(){ inventoryModal.style.display="flex"; }
function closeInventoryModal(){ inventoryModal.style.display="none"; }

function addItem(){
  const div = document.createElement("div");
  div.className = "item-box";
  div.innerHTML = `
    <strong>${itemName.value}</strong>
    <button onclick="this.parentElement.remove(); saveAll()">Remover</button>
  `;
  inventory.appendChild(div);
  closeInventoryModal();
  saveAll();
}

/* FOTO */
function loadPhoto(e) {
  const reader = new FileReader();
  reader.onload = () => {
    photo.innerHTML = `<img src="${reader.result}">`;
    localStorage.setItem("photo", reader.result);
  };
  reader.readAsDataURL(e.target.files[0]);
}

/* SALVAMENTO */
function saveAll(){
  document.querySelectorAll("input, select").forEach(el=>{
    if(el.id) localStorage.setItem(el.id, el.value);
  });
  localStorage.setItem("skills", skills.innerHTML);
  localStorage.setItem("inventory", inventory.innerHTML);
}

function loadAll(){
  document.querySelectorAll("input, select").forEach(el=>{
    if(el.id && localStorage.getItem(el.id)) el.value = localStorage.getItem(el.id);
  });
  if(localStorage.getItem("photo")) photo.innerHTML=`<img src="${localStorage.getItem("photo")}">`;
  if(localStorage.getItem("skills")) skills.innerHTML=localStorage.getItem("skills");
  if(localStorage.getItem("inventory")) inventory.innerHTML=localStorage.getItem("inventory");
}

document.addEventListener("input", saveAll);
window.onload = loadAll;

/* RESET */
function resetAll() {
  if (confirm("Deseja resetar toda a ficha?")) {
    localStorage.clear();
    location.reload();
  }
}
</script>

</body>
</html>






